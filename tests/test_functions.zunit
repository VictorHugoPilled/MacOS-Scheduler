#!/usr/bin/env zunit

@test 'testparseCSVWithCSV' {

      load ../scheduler.sh
      export csv='scheduler.csv'
      result=$(parseCSV $csv)
      assert $result is_not_empty
      assert $result does_not_contain 'File not found'
}

@test 'testparseCSVWithNoCSV' {

      load ../scheduler.sh
      result=$(parseCSV)
      assert $result is_not_empty
      assert $result same_as 'File not found'
}

@test 'testgetTodaysScriptsWithCSV' {

      load ../scheduler.sh
      export csv='scheduler.csv'
      result=$(getTodaysScripts $csv)
      assert $result is_not_empty
      assert $result does_not_contain 'No scripts today'
      
}

@test 'testgetTodaysScriptsWithNoCSV' {

      load ../scheduler.sh
      result=$(getTodaysScripts)
      assert $result is_empty

      
}


@test 'testScheduleFileExists' {

      load ../scheduler.sh
      result=$(schedule ~/createFile.py $(date "+%R"))
      echo $result
      # if scheduled, file will be created with current time
      assert "/Users/earlchase/testfile.txt" exists

}

@test 'testScheduleNonExistentFile' {

      load ../scheduler.sh
      result=$(schedule fake.py $(date "+%R"))
      assert $result same_as "File does not exists"
      

}


@test 'testMainWithCSV' {

      load ../scheduler.sh
      result=$(main)
      assert $result same_as 'Done'
      
      
}

@test 'testMainNoCSV' {

      load ../scheduler.sh
      result=$(main)
      assert $result is_empty
      
}